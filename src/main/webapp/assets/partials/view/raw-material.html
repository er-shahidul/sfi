
<div class="row">
<div ng-init="errors = cs6.errors" ng-include="'/bundles/sficore/partials/form/error.html'"></div>

<div class="col-sm-12">
<h5>4. Raw Material Supply</h5>
<p>
    (The following questions should be answered for manufacturing facilities covered under the scope of your SFI certificate)
</p>


<!-- Top section -->
<form name="cs6Form">
<table class="table table-striped vert-align-middle">
    <thead>
    <tr>
        <th>Private Forest Landowners and SFI Implementation Committee details</th>
        <th ng-class="{'disabled' : !operateInUsa()}">US</th>
        <th ng-class="{'disabled' : !operateInCa()}" >Canada</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td tooltip data-html="true" data-placement="top" data-container="body"
            data-title="Landowners selling timber directly to your organization” means those private landowners with which your organization has a contractual relationship to purchase or harvest timber (i.e., stumpage or logs)."
                >Number of private forest landowners selling timber (stumpage, logs or chips) directly to your organization last year.</td>

        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.usaTimberSellers" ng-class="{'disabled' : !operateInUsa()}">
        </td>

        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.caTimberSellers" ng-disabled="!operateInCa()" >
        </td>
    </tr>
    <tr>
        <td>Number of those private landowners who received information directly from your employees on the advantages of reforestation and Best Management Practices (BMPs).</td>
        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.usaInfoReceived" ng-class="{'disabled' : !operateInUsa()}">
        </td>

        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.caInfoReceived" ng-disabled="!operateInCa()" >
        </td>
    </tr>
    <tr>
        <td tooltip data-html="true" data-placement="top" data-container="body"
            data-title="Include all funding your organization provided last year to SFI Implementation Committees and others for logger training and education and all other SFI program implementation activities at the state or provincial level."
                >Funding provided last year for SFI program implementation activities at the state or provincial level (Support for US SICs in $US. Support for Canadian SICs in CAD.)</td>
        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.usaFundingProvided" ng-class="{'disabled' : !operateInUsa()}">
        </td>
        <td>
            <input type="number"  readonly class="form-control  shorter"
                   ng-model="cs6.caFundingProvided" ng-disabled="!operateInCa()" >
        </td>
    </tr>
    </tbody>
</table>
</form>
<!-- End Top Section -->



<!-- YES/NO Section 2 -->
<div class="form-group">
    <label>To assist in implementing Objective 8 of the SFI Standard Principles and Objectives, our organization has clearly defined in writing, and distributed to loggers, chip suppliers, dealers and other raw material suppliers, our organization specific procurement policy, program or plan.</label>
    <div class="form-group hasRadioBoxes">
        <input type="radio" disabled name="answer" name="orgYesNo" ng-model="cs6.orgYesNo" ng-value="1" class="icheck" icheck />
        <label class="checkboxLabel">Yes</label>
        &nbsp;&nbsp;&nbsp;
        <input type="radio" disabled name="answer" name="orgYesNo" ng-model="cs6.orgYesNo" ng-value="0" class="icheck" icheck />
        <label class="checkboxLabel">No</label>
    </div>
</div>
<br/><br/>
<!-- -->

<!-- GRID Section 3 -->
<div class="form-group" ng-show="cs6.supplies.length || cs6.others.length">

    <label><span tooltip data-html="true" data-placement="top" data-container="body"
           data-title="Raw Material Consumption. In this question SFI Inc. is seeking the volume of raw material (roundwood and whole log chips) your manufacturing facilities (including log and chip exports) used sourced directly from the forest. Volumes do not have to be absolutely precise; they should be rounded to the nearest unit. Please specify the units (board feet, cubic feet, cords, tons, etc.) you are reporting in column 2. ANNEX 1, which can be found at the end of this document, contains the multipliers that are used by SFI Inc. staff to convert various volume units to “thousands of cubic feet” for reporting totals. If you are converting volumes for this report, please use the appropriate multiplier from the table in ANNEX 1, unless you have a more accurate multiplier or conversion factor for your specific region and species."
            >Raw Material Supply -procured directly from the forest to your SFI manufacturing facilities (new!)</span></label>
    (can now drill down to more specific regions for sourcing of fiber supply)

    <table class="table table-striped">
        <thead>
        <tr>
            <th>Regions</th>
            <th>Raw Material Sources</th>
            <!--<th>Edit</th>-->
            <!--<th>Delete</th>-->
        </tr>
        </thead>
        <tbody>
        <!-- Normal supply -->
        <tr ng-repeat="supply in cs6.supplies">
            <td>{{ supply.regionName }}</td>
            <td>{{supply.title}}</td>
            <!--<td><a href="" ng-click="editSupply(supply.regionId)">Edit</a></td>-->
            <!--<td><a href="" ng-click="deleteSupply(supply.regionId)">Delete</a></td>-->
        </tr>
        <!-- -->

        <!-- Other country supply -->
        <tr ng-repeat="other in cs6.others">
            <td>{{ other.countryName }}</td>
            <td>{{ other.volume }}, {{ other.title}}</td>
            <!--<td><a href="" ng-click="editOther(other.countryID)">Edit</a></td>-->
            <!--<td><a href="" ng-click="deleteOther(other.countryID)">Delete</a></td>-->
        </tr>
        <!-- -->

        </tbody>
    </table>
</div>



<!-- FORM 1 / Regional Supply -->


<table class="table table-striped" ng-init="titles = sections" ng-repeat-start="supply in cs6.supplies">

<!-- Header -->
<thead>
<tr>
    <th>{{ supply.regionName }}</th>
    <th style="width:175px; text-align:center;">Units &amp; Volume</th>

    <th style="width:120px;  text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="A person with specialized skills in timber harvesting gained through experience or formal training who has successfully completed wood producer training programs and continued education requirements recognized by SFI Implementation Committees."
            >% Delivered by Qualified Logging Professionals</th>

    <th style="width:120px; text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="Your best estimate of the percentage of raw materials that came from forests that have been certified to the SFI Standard."
            >% from SFI only certified forests</th>

    <th style="width:120px; text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="Your best estimate of the percentage of raw materials that came from forests that have been certified to the American Tree Farm Standard. <br/>Did you know ATFS has a verification certification database to help you determine ATFS certified and ATFS non-certified lands. For more information visit: www.treefarmsystem.org/ atfsverificationdatabase"
            >% from ATFS only certified forests</th>
    <th style="width:120px; text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="Your best estimate of the percentage of raw materials that came from forests that have been certified to the Canadian Standards Association standards."

            >% from CSA only  certified forests</th>
    <th style="width:120px; text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="Your best estimate of the percentage of raw materials that came from forests that have been certified to Forest Stewardship Council Standards"
            >% from FSC only certified forests (new!)</th>
    <th style="width:180px; text-align:center;">Select standard combination if reporting volume certified to more than one standard (new!)</th>
    <th style="width:120px; text-align:center;"
        tooltip data-html="true" data-placement="top" data-container="body"
        data-title="Your best estimate of fiber sourced from dual or triple certified forests. Note that material sourced from an area certified to only one standard should be reported in the relevant certification standard column."
            >% certified forest to more than one standard (new!)</th>

</tr>
</thead>
<!-- -->


<!-- FORM -->

<tbody ng-init="sections = supply.sections">



    <tr ng-repeat-start="section in sections track by $index" ng-if="section.row == 1">
        <th>Private</th>
        <th colspan="8"></th>
    </tr>

    <tr ng-if="section.row == 7">
        <th>Public</th>
        <th colspan="8"></th>
    </tr>

    <tr ng-if="section.row == 11">
        <th>Other</th>
        <th colspan="8"></th>
    </tr>


    <tr ng-repeat-end ng-form="innerForm">

        <td ng-init="section.form = innerForm" ng-init="secTitle = secTitles[$index]"
            tooltip data-html="true" data-placement="top" data-container="body"
            data-title="{{titles[$index].tooltip }}"
                >

            <input type="checkbox" name="otherEnable" class="icheck" icheck value="0" disabled
                   ng-if="titles[$index].row == 11" ng-checked="supply.otherLabel" ng-model="otherEnable"/>
            {{titles[$index].name}}


            <div ng-show="titles[$index].row == 11 && supply.otherLabel"
                 data-trigger="click" data-content="{{ supply.otherLabel}}" data-title="" data-placement="bottom" popover>
                <a>{{ supply.otherLabel | limitTo: 20 }}</a>
            </div>

        </td>

        <td>

            <div ng-class="{'has-error' : isSecDirty(innerForm) && innerForm.item1.$invalid}">
                <select class="form-control" name="item1" ng-required="isSecDirty(innerForm)"
                        ng-model="section.unit" disabled >
                    <option value>&lt; Select Units &gt;</option>
                    <option ng-repeat="item in opt1"   ng-selected="item.id == section.unit" value="{{ item.id }}">{{item.name}}</option>
                </select>
            </div>

            <div class="form-group padded alignright"
                 ng-class="{'has-error' : isSecDirty(innerForm) && innerForm.item2.$invalid}" ng-show="section.unit">

                Volume <input type="number" style="width: 105px"  readonly class="form-control shortest2" name="item2" ng-required="isSecDirty(innerForm)"
                              ng-disabled="isDisabled(section)" ng-model="section.volume"
                              ng-pattern="/^\d*(\.\d{1,4})?$/" pattern-msg="Enter decimal number up to 4 precision points" customerror />
            </div>
        </td>

        <td align="center" ng-class="{'has-error' : isSecDirty(innerForm) && innerForm.item3.$invalid}">
            <input type="number"  readonly class="form-control shorter" max="100" min="0" name="item3" ng-required="isSecDirty(innerForm)"
                   ng-model="section.percDeliveredQualifiedLogging" ng-disabled="isDisabled(section)"
                   ng-pattern="/^\d*(\.\d{1,2})?$/" pattern-msg="Enter decimal number up to 2 precision points" customerror>%

            <a href="" id="pop-item-{{$index}}"
               ng-show="section.percDeliveredQualifiedLoggingReason"
               ng-click="showPopUp1View($index, section.percDeliveredQualifiedLoggingReason)">
                <div><small>Reason less than 100%</small></div>
            </a>
        </td>

        <td align="center" ng-class="{'has-error' : innerForm.item4.$invalid}">
            <input type="number"  readonly class="form-control shorter" name="item4"
                   ng-disabled="isDisabled(section)" ng-model="section.percSFIOnlyCertified"
                   ng-pattern="/^\d*(\.\d{1,2})?$/" pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td align="center" ng-class="{'has-error' : innerForm.item5.$invalid}">
            <input type="number"  readonly class="form-control  shorter" name="item5"
                   ng-disabled="isDisabled(section)" ng-model="section.percATFSOnlyCertified"
                   ng-pattern="/^\d*(\.\d{1,2})?$/" pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td align="center" ng-class="{'has-error' : innerForm.item6.$invalid}">
            <input type="number"  readonly class="form-control  shorter" name="item6"
                   ng-disabled="isDisabled(section)" ng-model="section.percCSAOnlyCertified"
                   ng-pattern="/^\d*(\.\d{1,2})?$/" pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td align="center" ng-class="{'has-error' : innerForm.item7.$invalid}">
            <input type="number"  readonly class="form-control  shorter" name="item7"
                   ng-disabled="isDisabled(section)" ng-model="section.percFSCOnlyCertified"
                   ng-pattern="/^\d*(\.\d{1,2})?$/" pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td align="center">

            <div ng-repeat="item in section.standardValues">
                <span ng-if="item">{{ getStandard($index) }}</span>
            </div>

            <!--<a ng-hide="isDisabled(section)" ng-click="showPopUp2($index)" id="pop-link-{{$index}}">Select Standard</a>-->
            <!--<span ng-show="isDisabled(section)">Select Standard</span>-->
        </td>

        <td align="center" ng-class="{'has-error' : innerForm.item8.$invalid}">

            <input type="hidden" ng-model="section.standardValues">
            <div ng-repeat="item in section.standardValues">
                <span ng-if="item">{{ item }}%</span>
            </div>

        </td>
    </tr>
</tbody>


<!-- Form End -->
</table >

<!-- Form 1 buttons -->
<div ng-repeat-end class="col-sm-4 col-sm-offset-8 alignright" ng-show="regionId">
    <button type="button" class="btn secondary" ng-click="cancelSupply()">Cancel</button>
    <button type="button" class="btn btn-success" ng-click="saveSupply()">I'm done, save and close this</button>
</div>
<div class="control-group">&nbsp;</div>
<!-- -->



<!-- FORM 2 -->
<div class="col-sm-12" ng-show="operateInOthers()">
    <div class="form-group">
        <label>SFI Inc. is often asked for details on fiber supply and is interested in how much program participant fiber (used by manufacturing facilities in the US or Canada that are covered in the scope of SFI certification) is procured from outside the USA and Canada. The SFI definition of procurement is:  Acquisition of roundwood (sawlogs or pulpwood) and field-manufactured or primary-mill residual chips, pulp, and veneer to support a forest products manufacturing facility.</label>
    </div>
</div>

<table class="table table-striped" ng-show="operateInOthers()">

    <!-- Header -->
    <thead>
    <tr>
        <th>Outside Canada & USA</th>
        <th width="15%">Units</th>
        <th>Volume</th>
        <th>% PEFC certified forest content (new!)</th>
        <th>% FSC certified forest content (new!)</th>
        <th>% Dual PEFC/FSC forest content (new!)</th>
        <th>% SFI Fiber Sourcing (new!)</th>
        <th>% Other (new!)</th>
    </tr>
    </thead>


    <!-- Form 2 -->
    <tbody>
    <tr ng-form="innerForm" ng-repeat="other in cs6.others">

        <td ng-init="other.form = innerForm" ng-class="{'has-error' : valOther && innerForm.other1.$invalid}">
            <select class="form-control" name="other1" id="countryId" disabled
                    ng-model="other.countryID" required>
                <option value>&lt; Select Country &gt;</option>
                <option ng-repeat="item in otherCountries" ng-selected="other.countryID == item.id" value="{{ item.id }}">{{item.country}}</option>
            </select>
        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other2.$invalid}">
            <select class="form-control" name="other2" disabled
                    ng-model="other.units" ng-required="other.countryID" customerror>
                <option value="">&lt; Select Units &gt;</option>
                <option ng-repeat="item in opt1" ng-selected="other.units == item.id" value="{{ item.id }}">{{item.name}}</option>
            </select>

        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other3.$invalid}">
            <input type="number"  readonly class="form-control shorter" name="other3" ng-required="other.countryID"
                          ng-model="other.volume" ng-pattern="/^\d*(\.\d{1,4})?$/" readonly
                          pattern-msg="Enter decimal number up to 4 precision points" customerror>
        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other4.$invalid}">
            <input type="number"  readonly class="form-control shorter" max="100" min="0" name="other4"
                   ng-model="other.percPEFCCertified" ng-pattern="/^\d*(\.\d{1,2})?$/" readonly
                   pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td ng-class="{'has-error' : valOther &&  innerForm.other5.$invalid}">
            <input type="number"  readonly class="form-control shorter" name="other5"
                   ng-model="other.percFSCCertified" ng-pattern="/^\d*(\.\d{1,2})?$/"
                   pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other6.$invalid}">
            <input type="number"  readonly  readonly class="form-control shorter" name="other6"
                   ng-model="other.percPEFCFSCCertified" ng-pattern="/^\d*(\.\d{1,2})?$/" readonly
                   pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other7.$invalid}">
            <input type="number"  readonly  readonly class="form-control  shorter" name="other7"
                   ng-model="other.percSFIFiberSourcing" ng-pattern="/^\d*(\.\d{1,2})?$/" readonly
                   pattern-msg="Enter decimal number up to 2 precision points" customerror>%
        </td>

        <td ng-class="{'has-error' : valOther && innerForm.other8.$invalid}">

            <input type="number"  readonly  readonly class="form-control  shorter" name="other8"
                   ng-model="other.percOther" ng-pattern="/^\d*(\.\d{1,2})?$/" readonly
                   pattern-msg="Enter decimal number up to 2 precision points" customerror>%

            <div>
                <a ng-show="other.percOther && other.percOtherReason"
                    data-content="{{other.percOtherReason}}" data-title="" data-placement="bottom" data-trigger="click" popover


                >Assurance responsible sources of supply</a>
            </div>
        </td>
    </tr>
    <!-- -->
    </tbody>
</table>

<!-- Form2 button -->
<div class="col-sm-4 col-sm-offset-8 alignright" ng-show="other.countryID">
    <button type="button" class="btn secondary" ng-click="cancelOther()">Cancel</button>
    <button type="button" class="btn btn-success" ng-click="saveOther()">I'm done, save and close this</button>
</div>
<!-- -->



<!-- Modals -->
<div id="delete1" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" data-dismiss="modal" aria-hidden="true" class="close">x</a>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete <span id="region-text"></span> as a raw material supply?</p>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" id="btnConfirm" class="btn confirm" ng-click="deleteOk()">ok</a>
                <a href="#" data-dismiss="modal" aria-hidden="true" class="btn secondary" ng-click="deleteCancel()">Cancel</a>
            </div>
        </div>
    </div>
</div>
<div id="confirm" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" data-dismiss="modal" aria-hidden="true" class="close">x</a>
            </div>
            <div class="modal-body">
                <p>Atleast provide one sources data</p>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" id="btnConfirm" class="btn confirm" ng-click="">Ok</a>
            </div>
        </div>
    </div>
</div>
<!-- -->

</div>
</div>
